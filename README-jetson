NOTE: Only Respeaker 4-Mic Array (one codec instance at a time) is verified on Jetson platform with the help of this driver


Steps for compiling the codec driver with Jetson kernel

1. Add following lines to sound/soc/codecs/Kconfig

config SND_SOC_AC108_CODEC
       tristate
       default y


2. Add following lines to sound/soc/codecs/Makefile

snd-soc-ac108-objs := ac101.o ac108.o
obj-$(CONFIG_SND_SOC_AC108_CODEC)       += snd-soc-ac108.o


3. Copy following files from this repo to sound/soc/codecs

ac108.h
ac108.c
ac101.c
ac101_regs.h
ac10x.h
sound-compatible-4.18.h

4. Recompile kernel and flash updated kernel on Jetson and reboot
(Links from Internet: https://developer.ridgerun.com/wiki/index.php?title=Jetson_Nano/Development/Building_the_Kernel_from_Source)

5. If pinmiux config is in place, below script can be used to record 4 channel audio data

amixer -c 1 cset name="ADMAIF9 Mux" "I2S1"
amixer -c 1 cset name="I2S1 codec frame mode" "dsp-a"
amixer -c 1 cset name="I2S1 codec master mode" "cbm-cfm"
arecord -D hw:1,8 -r 16000 -c 4 -f S32_LE -t wav -d 10 ./out.wav &

NOTE: I2S Instance used depends on the Jetson platform varian
