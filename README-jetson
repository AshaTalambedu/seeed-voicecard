NOTE: Only Respeaker Circular 4-Mic Array (one codec instance at a time) is verified on Jetson platform using below guidelines

List of files used from jetson-respeaker-4mic-array-compatible branch of seeed-voicecard repo for Integrating Respeaker 4-Mic Array with Jetson Platforms:

	seeed-voicecard/
	├── ac101.c
	├── ac101_regs.h
	├── ac108.c
	├── ac108.h
	├── ac10x.h
	├── jetson_BSP32.3.patch
	├── README-jetson
	└── sound-compatible-4.18.h

Steps for Integrating Respeaker 4-Mic Array with Jetson Platforms

1. Refer the patch provided as part of the repo for patching kernel

	Patch for L4T 32.3.1 (part of JetPack 4.3) - jetson_BSP32.3.patch
        NOTE: Make sure to patch platform relevant DTs. 

2. Copy following files from seeed-voicecard repo to kernel/nvidia/sound/soc/codecs

	ac108.h
	ac108.c
	ac101.c
	ac101_regs.h
	ac10x.h
	sound-compatible-4.18.h

3. Recompile kernel and flash updated kernel and dtb on Jetson and reboot
(Kernel customisation on Jetson: https://docs.nvidia.com/jetson/l4t/index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/kernel_custom.html)

4. Necessary pinmux configuration has to be done after reboot 

	Launch Jetson-IO (sudo /opt/nvidia/jetson-io/jetson-io.py)
	Select “Configure 40‑pin expansion header”
	Select “i2s” function
	Select “Back”
	Select “Save and reboot to reconfigure pins”

5. Below script can be used to record 4 channel audio data

	amixer -c 1 cset name="ADMAIF9 Mux" "I2S1"
	amixer -c 1 cset name="I2S1 codec frame mode" "dsp-a"
	amixer -c 1 cset name="I2S1 codec master mode" "cbm-cfm"
	arecord -D hw:1,8 -r 16000 -c 4 -f S32_LE -t wav -d 10 ./out.wav &

	NOTE: I2S Instance used depends on the Jetson platform being used
